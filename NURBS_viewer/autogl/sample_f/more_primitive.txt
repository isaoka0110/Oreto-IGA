                サンプルプログラムmore_primitiveの解説

目次

1. 概要
2. プログラムの動作について
3. ソースコードの解説

このサンプルプログラムのポイント

* 高レベル描画プリミティブ
* 鏡面反射
* 透視投影

このサンプルプログラムで紹介されている「おてがる」API

autogl_draw_sphere3d 
  球を描画する。
autogl_draw_cylinder3d 
  円柱を描画する。
autogl_draw_cone3d 
  円錐を描画する。
autogl_draw_circle3d 
  円を描画する。
autogl_turn_on_specular
  鏡面反射(スペキュラーライティング)を有効にする。
autogl_set_perspective_view_flag
  透視投影を設定する。



1. 概要

サンプルプログラムmore_primitiveでは、「おてがる」三次元ユーティリティの
円柱や球を表示する機能を紹介しています。

「おてがる」のユーティリティ機能では、その基本機能をベースにして
主に応用的で、より特定のアプリケーション分野に特化した機能を
実現しています。

二次元および三次元ユーティリティでは、
二次元または三次元のCGアプリケーションにとって比較的一般的な、
より高レベルな描画プリミティブ機能をサポートします。
三次元の場合には、例えば、球、円柱、円錐や円、および立方体や直方体などです。
実際には、これらはそれぞれ複数の線分や三角形に分割され、
そして「おてがる」の基本描画機能を用いてレンダリングされています。



2. プログラムの動作について

このプログラムの動作は、基本的にはサンプルプログラムprimitiveと同じですが、
表示される内容が異なります。

more_primitiveでは、球面、円柱面、円錐面および円を表示します。
多少光ってみえるのは、鏡面反射(スペキュラー)効果のせいです。
また、透視投影を用いているので、若干の遠近感がでています。

座標軸を表示したあとで、
まず、半径10の球面を黄色で中心(10, 10, 0)に表示します。
次に、半径10の円柱面をシアンで表示します。
このとき、中心軸は(-10, -20, 30)から(10, 20, 30)の線分です。
さらに、底面の半径10の円錐面を紫色で表示します。
底面の中心は(-10, -20, 30)、頂点は(10, 20, 30)となります。
最後に、赤で円を表示します。
中心点は(-10, -10, 0)で、ベクトル(1, 1, 0)に垂直な平面上に配置されます。

それぞれ、わりと少ない数の三角形で近似しているのですが、
それなりにきれいに表示されていると重います。
これは、スムーズシェーディング(グーローシェーディング)による効果です。



3. ソースコードの解説

このサンプルプログラムの構造は、基本的にはサンプルプログラムprimitiveと
同じです。
若干の違いがありますので、そこだけを説明します。

まず、メインルーチンのセクションです。
透視投影効果によって遠近感を表現するために、
autogl_set_perspective_view_flagに1(真)を渡してコールしています。
ここで0(偽)を渡せば、並行投影になります。
デフォルトは並行投影です。

次に、再描画コールバックautogl_redrawでは、以下のような、
「おてがる」三次元ユーティリティの高レベル描画プリミティブコールを
用いています。

autogl_draw_sphere3d : 球を描画する。
autogl_draw_cylinder3d : 円柱を描画する。
autogl_draw_cone3d : 円錐を描画する。
autogl_draw_circle3d : 円を描画する。

詳しくは、マニュアルのAPIリファレンスmanual/api_reference.txtのうち、
三次元ユーティリティ、三次元描画プリミティブのセクションを御覧下さい。

また、描画命令の最初のほうに、autogl_turn_on_specularがあります。
これ以降の描画命令では、
鏡面反射(スペキュラーライティング)が有効になり、
よく磨かれた金属材料のように曲面の一部が光ってみえます。

